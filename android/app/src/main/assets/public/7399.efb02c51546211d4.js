"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7399],{7399:(w,v,s)=>{s.r(v),s.d(v,{AlumnoPageModule:()=>U});var m=s(6814),h=s(95),i=s(1509),g=s(6958),c=s(5861),o=s(6689),I=s(3076),u=s(3599);let Z=(()=>{var r;class a{constructor(){}getAsignaturasInscritasPorAlumno(n){return(0,c.Z)(function*(){try{const{data:e,error:l}=yield u.O.from("alumno_seccion").select("id_seccion").eq("id_alumno",n);if(l)throw console.error("Error al obtener las secciones inscritas por el alumno:",l),l;const d=e.map(A=>A.id_seccion),{data:E,error:f}=yield u.O.from("seccion").select("id_asignatura").in("id",d);if(f)throw console.error("Error al obtener las asignaturas inscritas por el alumno:",f),f;const F=E.map(A=>A.id_asignatura),{data:b,error:p}=yield u.O.from("asignatura").select("*").in("id",F);if(p)throw console.error("Error al obtener los detalles de las asignaturas inscritas por el alumno:",p),p;return b||[]}catch(e){throw console.error("Error en el servicio ClaseService:",e),e}})()}}return(r=a).\u0275fac=function(n){return new(n||r)},r.\u0275prov=o.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),a})(),y=(()=>{var r;class a{constructor(){}getAlumnoInfo(n){return(0,c.Z)(function*(){try{const{data:e,error:l}=yield u.O.from("alumno").select("id, nombre, apellido, id_usuario, apellido_materno").eq("id_usuario",n);if(l)throw console.error("Error al obtener la informaci\xf3n del alumno:",l),l;return e?e[0]:null}catch(e){throw console.error("Error en el servicio AlumnoInfoService:",e),e}})()}}return(r=a).\u0275fac=function(n){return new(n||r)},r.\u0275prov=o.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),a})();function S(r,a){if(1&r&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&r){const t=o.oxw();o.xp6(1),o.AsE("",t.alumnoInfo.nombre," ",t.alumnoInfo.apellido,"")}}function P(r,a){if(1&r&&(o.TgZ(0,"ion-item")(1,"ion-label"),o._uU(2),o.qZA()()),2&r){const t=a.$implicit;o.xp6(2),o.Oqu(t.nombre)}}const C=[{path:"",component:(()=>{var r;class a{constructor(n,e,l,d){this.router=n,this.userService=e,this.claseService=l,this.alumnoInfoService=d,this.asignaturasInscritas=[]}ngOnInit(){this.currentUser=this.userService.getCurrentUser(),this.loadAsignaturasInscritas(),this.loadAlumnoInfo()}loadAlumnoInfo(){var n=this;return(0,c.Z)(function*(){try{n.alumnoInfo=yield n.alumnoInfoService.getAlumnoInfo(n.currentUser.id)}catch(e){console.error("Error al cargar la informaci\xf3n del alumno:",e)}})()}loadAsignaturasInscritas(){var n=this;return(0,c.Z)(function*(){try{const e=yield n.claseService.getAsignaturasInscritasPorAlumno(n.currentUser.id);n.asignaturasInscritas=e}catch(e){console.error("Error al cargar las asignaturas inscritas por el alumno:",e)}})()}logout(){console.log("Cerrando sesi\xf3n"),this.userService.setCurrentUser(void 0),this.router.navigate(["/home"])}}return(r=a).\u0275fac=function(n){return new(n||r)(o.Y36(g.F0),o.Y36(I.K),o.Y36(Z),o.Y36(y))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-alumno"]],decls:23,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[4,"ngIf"],[1,"logout-button-wrapper"],["color","danger","expand","block",1,"ion-text-wrap",2,"min-width","200px",3,"click"],["name","log-out-outline"],[4,"ngFor","ngForOf"]],template:function(n,e){1&n&&(o.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),o._uU(3,"Alumno"),o.qZA()()(),o.TgZ(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),o._uU(8,"Alumno"),o.qZA()()(),o.TgZ(9,"h2"),o._uU(10,"Bienvenido, "),o.YNc(11,S,2,2,"span",4),o.qZA(),o.TgZ(12,"div",5)(13,"ion-button"),o._uU(14,"Escanear C\xf3digo QR"),o.qZA()(),o.TgZ(15,"div",5)(16,"ion-button",6),o.NdJ("click",function(){return e.logout()}),o._UZ(17,"ion-icon",7),o._uU(18," Cerrar sesi\xf3n "),o.qZA()(),o.TgZ(19,"h1"),o._uU(20,"Asignaturas inscritas"),o.qZA(),o.TgZ(21,"ion-list"),o.YNc(22,P,3,1,"ion-item",8),o.qZA()()),2&n&&(o.Q6J("translucent",!0),o.xp6(4),o.Q6J("fullscreen",!0),o.xp6(7),o.Q6J("ngIf",e.alumnoInfo),o.xp6(11),o.Q6J("ngForOf",e.asignaturasInscritas))},dependencies:[m.sg,m.O5,i.YG,i.W2,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.wd,i.sr]}),a})()}];let T=(()=>{var r;class a{}return(r=a).\u0275fac=function(n){return new(n||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[g.Bz.forChild(C),g.Bz]}),a})(),U=(()=>{var r;class a{}return(r=a).\u0275fac=function(n){return new(n||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[m.ez,h.u5,i.Pc,T]}),a})()}}]);