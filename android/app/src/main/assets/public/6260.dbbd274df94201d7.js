"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6260],{6260:(M,g,t)=>{t.r(g),t.d(g,{HomePageModule:()=>Z});var p=t(6814),s=t(1509),u=t(95),c=t(6958),m=t(5861),h=t(3599),e=t(6689),f=t(3076);const v=[{path:"",component:(()=>{var r;class a{constructor(o,n,i){this.router=o,this.userService=n,this.alertCtrl=i,this.username="",this.password="",this.mensajeError="",this.tipoError=""}showAlert(){var o=this;return(0,m.Z)(function*(){yield o.alertCtrl.create({header:o.tipoError,message:o.mensajeError,buttons:[{text:"Entendido",role:"OK",cssClass:"alertButton",handler:()=>{}}]}).then(n=>{n.present()})})()}login(){var o=this;return(0,m.Z)(function*(){try{const{data:n,error:i}=yield h.O.from("usuario").select("*").eq("username",o.username).single();i?(console.error("Error al consultar datos:",i),o.tipoError="Error al iniciar sesi\xf3n.",o.mensajeError="Ocurri\xf3 un error al consultar los datos del usuario.",o.showAlert()):n?n.password===o.password?(o.tipoError="Inicio de sesi\xf3n exitoso!",console.log("El usuario es "+n.tipo_usuario),o.userService.setCurrentUser(n),"alumno"===n.tipo_usuario?o.router.navigate(["/alumno"]):"profesor"===n.tipo_usuario&&o.router.navigate(["/profesor"]),o.username="",o.password=""):(console.log("Contrase\xf1a incorrecta"),o.tipoError="Error al iniciar sesi\xf3n.",o.mensajeError="La contrase\xf1a no es correcta, intentelo nuevamente.",o.showAlert()):(console.log("Usuario no encontrado"),o.tipoError="Error al iniciar sesi\xf3n.",o.mensajeError="Usuario no encontrado, intentelo nuevamente.",o.showAlert())}catch(n){console.error("Error al iniciar sesi\xf3n:",n),o.tipoError="Error al iniciar sesi\xf3n.",o.mensajeError="Ocurri\xf3 un error al iniciar sesi\xf3n.",o.showAlert()}})()}passwordRecovery(){this.router.navigate(["/recuperar-contrasena"])}}return(r=a).\u0275fac=function(o){return new(o||r)(e.Y36(c.F0),e.Y36(f.K),e.Y36(s.Br))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-home"]],decls:30,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["size","12"],["position","floating"],["type","text","placeholder","Ingrese su nombre de usuario...",3,"ngModel","ngModelChange"],["type","password","placeholder","Ingrese su contrase\xf1a...",3,"ngModel","ngModelChange"],["expand","full",3,"click"],["expand","full","color","tertiary",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3," Login "),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e._uU(8,"Login"),e.qZA()()(),e.TgZ(9,"ion-grid")(10,"ion-row")(11,"ion-col",4)(12,"ion-item")(13,"ion-label",5),e._uU(14,"Usuario"),e.qZA(),e.TgZ(15,"ion-input",6),e.NdJ("ngModelChange",function(d){return n.username=d}),e.qZA()()()(),e.TgZ(16,"ion-row")(17,"ion-col",4)(18,"ion-item")(19,"ion-label",5),e._uU(20,"Contrase\xf1a"),e.qZA(),e.TgZ(21,"ion-input",7),e.NdJ("ngModelChange",function(d){return n.password=d}),e.qZA()()()(),e.TgZ(22,"ion-row")(23,"ion-col",4)(24,"ion-button",8),e.NdJ("click",function(){return n.login()}),e._uU(25,"Iniciar sesi\xf3n"),e.qZA()()(),e.TgZ(26,"ion-row")(27,"ion-col",4)(28,"ion-button",9),e.NdJ("click",function(){return n.passwordRecovery()}),e._uU(29,"Restablecer contrase\xf1a"),e.qZA()()()()()),2&o&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(11),e.Q6J("ngModel",n.username),e.xp6(6),e.Q6J("ngModel",n.password))},dependencies:[u.JJ,u.On,s.YG,s.wI,s.W2,s.jY,s.Gu,s.pK,s.Ie,s.Q$,s.Nd,s.wd,s.sr,s.j9]}),a})()}];let E=(()=>{var r;class a{}return(r=a).\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.Bz.forChild(v),c.Bz]}),a})(),Z=(()=>{var r;class a{}return(r=a).\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[p.ez,u.u5,s.Pc,E]}),a})()}}]);